import{d as K,r as h,c as u,o as P,f as j,a as o,b as a,e as _,t as n,F as v,g as y,h as b,_ as $,i as R,j as w,k as s}from"./index-DKiHctOY.js";const A={class:"page-container"},M={key:0,class:"loading"},V={key:1,class:"error"},z={key:2},I={class:"grid-container top-rankings-grid"},q={class:"ranking-card"},G={class:"name"},H={class:"value"},J={class:"ranking-card"},Q={class:"name"},U={class:"value"},W={class:"ranking-card"},X={class:"name"},Y={class:"value"},Z={class:"grid-container charts-row"},tt={class:"chart-container"},at={class:"chart-container"},et={class:"grid-container charts-row"},lt={class:"chart-container"},nt={class:"chart-container"},ot={class:"table-container"},st={class:"pagination"},rt=["disabled"],ut=["disabled"],f=10,it=K({__name:"Campaign5View",setup(ct){const p=h(!0),m=h(null),c=h([]),d=l=>parseFloat(l.replace(/,|%/g,""))||0,F=l=>{l[0];const t=l.slice(1);console.log("rows",t),c.value=t.map(e=>({no:parseInt(e[0]),kolName:e[1],follower:d(e[2]),platform:e[3],type:e[4],link:e[5],reach:d(e[6]),like:d(e[7]),comment:d(e[8]),share:d(e[9]),ctr:d(e[10]),totalEngagement:d(e[11]),engagementRateByFollower:d(e[12]),engagementRateByReach:d(e[13])}))},i=u(()=>{const l={};for(const t of c.value)l[t.type]||(l[t.type]={type:t.type,totalReach:0,totalLike:0,totalComment:0,totalShare:0,totalEngagement:0}),l[t.type].totalReach+=t.reach,l[t.type].totalLike+=t.like,l[t.type].totalComment+=t.comment,l[t.type].totalShare+=t.share,l[t.type].totalEngagement+=t.totalEngagement;return Object.values(l)}),E=u(()=>[...c.value].sort((l,t)=>t.totalEngagement-l.totalEngagement).slice(0,5)),T=u(()=>[...c.value].sort((l,t)=>t.engagementRateByFollower-l.engagementRateByFollower).slice(0,5)),B=u(()=>[...c.value].sort((l,t)=>t.engagementRateByReach-l.engagementRateByReach).slice(0,5)),L=u(()=>({labels:i.value.map(t=>t.type),datasets:[{label:"Total Reach",backgroundColor:"#4BC0C0",data:i.value.map(t=>t.totalReach)},{label:"Total Like",backgroundColor:"#FFCE56",data:i.value.map(t=>t.totalLike)},{label:"Total Comment",backgroundColor:"#FF6384",data:i.value.map(t=>t.totalComment)},{label:"Total Share",backgroundColor:"#9966FF",data:i.value.map(t=>t.totalShare)}]})),S=u(()=>({labels:i.value.map(t=>t.type),datasets:[{label:"Total Engagement",backgroundColor:"#FFCE56",data:i.value.map(t=>t.totalEngagement)}]})),D=u(()=>{const l={};for(const r of c.value)l[r.type]||(l[r.type]=0),l[r.type]+=1;const t=Object.keys(l),e=Object.values(l);return{labels:t,datasets:[{label:"Number of KOLs by Type",data:e,backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FDB45C","#949FB1"]}]}}),N=u(()=>{const l={};for(const r of c.value)l[r.type]||(l[r.type]={sum:0,count:0}),l[r.type].sum+=r.ctr,l[r.type].count+=1;const t=Object.keys(l),e=t.map(r=>{const{sum:x,count:C}=l[r];return C>0?x/C:0});return{labels:t,datasets:[{label:"Average CTR (%) per Type",data:e,borderColor:"#ff6384",backgroundColor:"#ffb1c1",tension:.1}]}}),g=h(1),k=u(()=>Math.ceil(c.value.length/f)),O=u(()=>{const l=(g.value-1)*f;return c.value.slice(l,l+f)});return P(async()=>{try{p.value=!0;const l=await j("Campaign 5");console.log("data",l),l&&l.length>1?F(l):m.value="No data found."}catch(l){console.log("Failed to load data.",l),m.value="Failed to load data."}finally{p.value=!1}}),(l,t)=>(s(),o("div",A,[t[11]||(t[11]=a("h1",null,"Campaign 5 Details",-1)),p.value?(s(),o("div",M,"Loading Data...")):_("",!0),m.value?(s(),o("div",V,n(m.value),1)):_("",!0),!p.value&&!m.value?(s(),o("div",z,[a("div",I,[a("div",q,[t[2]||(t[2]=a("h2",null,"Top 5 KOLs by Engagement",-1)),(s(!0),o(v,null,y(E.value,e=>(s(),o("div",{class:"ranking-item",key:e.no},[a("span",G,n(e.kolName),1),a("span",H,n(e.totalEngagement.toLocaleString()),1)]))),128))]),a("div",J,[t[3]||(t[3]=a("h2",null,"Top 5 Engagement rate by follow",-1)),(s(!0),o(v,null,y(T.value,e=>(s(),o("div",{class:"ranking-item",key:e.no},[a("span",Q,n(e.kolName),1),a("span",U,n(e.engagementRateByFollower.toFixed(2))+"%",1)]))),128))]),a("div",W,[t[4]||(t[4]=a("h2",null,"Top 5 Engagement rate by reach",-1)),(s(!0),o(v,null,y(B.value,e=>(s(),o("div",{class:"ranking-item",key:e.no},[a("span",X,n(e.kolName),1),a("span",Y,n(e.engagementRateByReach.toFixed(2))+"%",1)]))),128))])]),a("div",Z,[a("div",tt,[t[5]||(t[5]=a("h2",null,"KOL Type",-1)),b($,{"chart-data":D.value},null,8,["chart-data"])]),a("div",at,[t[6]||(t[6]=a("h2",null,"Total Engagement",-1)),b(R,{"chart-data":S.value},null,8,["chart-data"])])]),a("div",et,[a("div",lt,[t[7]||(t[7]=a("h2",null,"Total Reach, Like, Share, Comment",-1)),b(R,{"chart-data":L.value},null,8,["chart-data"])]),a("div",nt,[t[8]||(t[8]=a("h2",null,"Average CTR (%) by KOL Type",-1)),b(w,{"chart-data":N.value},null,8,["chart-data"])])]),a("div",ot,[t[10]||(t[10]=a("h2",null,"All KOL Performance Data",-1)),a("table",null,[t[9]||(t[9]=a("thead",null,[a("tr",null,[a("th",null,"No."),a("th",null,"KOL Name"),a("th",null,"Followers"),a("th",null,"Platform"),a("th",null,"Type"),a("th",null,"Reach"),a("th",null,"Likes"),a("th",null,"Comments"),a("th",null,"Shares"),a("th",null,"CTR (%)"),a("th",null,"Total Engagement"),a("th",null,"ER by Follower (%)"),a("th",null,"ER by Reach (%)")])],-1)),a("tbody",null,[(s(!0),o(v,null,y(O.value,e=>(s(),o("tr",{key:e.no},[a("td",null,n(e.no),1),a("td",null,n(e.kolName),1),a("td",null,n(e.follower.toLocaleString()),1),a("td",null,n(e.platform),1),a("td",null,n(e.type),1),a("td",null,n(e.reach.toLocaleString()),1),a("td",null,n(e.like.toLocaleString()),1),a("td",null,n(e.comment.toLocaleString()),1),a("td",null,n(e.share.toLocaleString()),1),a("td",null,n(e.ctr.toFixed(2)),1),a("td",null,n(e.totalEngagement.toLocaleString()),1),a("td",null,n(e.engagementRateByFollower.toFixed(2)),1),a("td",null,n(e.engagementRateByReach.toFixed(2)),1)]))),128))])]),a("div",st,[a("button",{onClick:t[0]||(t[0]=e=>g.value--),disabled:g.value===1},"Prev",8,rt),a("span",null,"Page "+n(g.value)+" of "+n(k.value),1),a("button",{onClick:t[1]||(t[1]=e=>g.value++),disabled:g.value===k.value},"Next",8,ut)])])])):_("",!0)]))}});export{it as default};
