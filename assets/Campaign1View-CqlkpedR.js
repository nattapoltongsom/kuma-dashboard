import{d as x,r as h,c as u,o as P,f as j,a as o,b as t,e as V,g as f,t as n,F as y,h as v,i as b,_ as $,j as k,k as w,l as s}from"./index-Bi-uZAFi.js";const A={class:"page-container"},M={key:0,class:"loading"},z={key:1,class:"error"},I={key:2},q={class:"grid-container top-rankings-grid"},G={class:"table-container"},H={class:"table-container"},J={class:"table-container"},Q={class:"grid-container charts-row"},U={class:"chart-container"},W={class:"chart-container"},X={class:"grid-container charts-row"},Y={class:"chart-container"},Z={class:"chart-container"},tt={class:"table-container"},et={class:"pagination"},at=["disabled"],lt=["disabled"],C=10,st=x({__name:"Campaign1View",setup(nt){const p=h(!0),m=h(null),d=h([]),i=l=>parseFloat(l.replace(/,|%/g,""))||0,T=l=>{l[0];const e=l.slice(1);console.log("rows",e),d.value=e.map(a=>({no:parseInt(a[0]),kolName:a[1],follower:i(a[2]),platform:a[3],type:a[4],link:a[5],reach:i(a[6]),like:i(a[7]),comment:i(a[8]),share:i(a[9]),ctr:i(a[10]),totalEngagement:i(a[11]),engagementRateByFollower:i(a[12]),engagementRateByReach:i(a[13])}))},c=u(()=>{const l={};for(const e of d.value)l[e.type]||(l[e.type]={type:e.type,totalReach:0,totalLike:0,totalComment:0,totalShare:0,totalEngagement:0}),l[e.type].totalReach+=e.reach,l[e.type].totalLike+=e.like,l[e.type].totalComment+=e.comment,l[e.type].totalShare+=e.share,l[e.type].totalEngagement+=e.totalEngagement;return Object.values(l)}),E=u(()=>[...d.value].sort((l,e)=>e.totalEngagement-l.totalEngagement).slice(0,5)),L=u(()=>[...d.value].sort((l,e)=>e.engagementRateByFollower-l.engagementRateByFollower).slice(0,5)),B=u(()=>[...d.value].sort((l,e)=>e.engagementRateByReach-l.engagementRateByReach).slice(0,5)),_=u(()=>({labels:c.value.map(e=>e.type),datasets:[{label:"Total Reach",backgroundColor:"#4BC0C0",data:c.value.map(e=>e.totalReach)},{label:"Total Like",backgroundColor:"#FFCE56",data:c.value.map(e=>e.totalLike)},{label:"Total Comment",backgroundColor:"#FF6384",data:c.value.map(e=>e.totalComment)},{label:"Total Share",backgroundColor:"#9966FF",data:c.value.map(e=>e.totalShare)}]})),N=u(()=>({labels:c.value.map(e=>e.type),datasets:[{label:"Total Engagement",backgroundColor:"#FFCE56",data:c.value.map(e=>e.totalEngagement)}]})),S=u(()=>{const l={};for(const r of d.value)l[r.type]||(l[r.type]=0),l[r.type]+=1;const e=Object.keys(l),a=Object.values(l);return{labels:e,datasets:[{label:"Number of KOLs by Type",data:a,backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FDB45C","#949FB1"]}]}}),D=u(()=>{const l={};for(const r of d.value)l[r.type]||(l[r.type]={sum:0,count:0}),l[r.type].sum+=r.ctr,l[r.type].count+=1;const e=Object.keys(l),a=e.map(r=>{const{sum:K,count:F}=l[r];return F>0?K/F:0});return{labels:e,datasets:[{label:"Average CTR (%) per Type",data:a,borderColor:"#ff6384",backgroundColor:"#ffb1c1",tension:.1}]}}),g=h(1),R=u(()=>Math.ceil(d.value.length/C)),O=u(()=>{const l=(g.value-1)*C;return d.value.slice(l,l+C)});return P(async()=>{try{p.value=!0;const l=await j("Campaign 1");console.log("data",l),l&&l.length>1?T(l):m.value="No data found."}catch(l){console.log("Failed to load data.",l),m.value="Failed to load data."}finally{p.value=!1}}),(l,e)=>(s(),o("div",A,[e[15]||(e[15]=t("h1",null,"Campaign 1 Details",-1)),e[16]||(e[16]=V()),p.value?(s(),o("div",M,"Loading Data...")):f("",!0),m.value?(s(),o("div",z,n(m.value),1)):f("",!0),!p.value&&!m.value?(s(),o("div",I,[t("div",q,[t("div",G,[e[3]||(e[3]=t("h2",null,"Top 5 KOLs by Engagement",-1)),t("table",null,[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th")])],-1)),t("tbody",null,[(s(!0),o(y,null,v(E.value,a=>(s(),o("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.totalEngagement.toLocaleString()),1)]))),128))])])]),t("div",H,[e[5]||(e[5]=t("h2",null,"Top 5 Engagement rate by follow",-1)),t("table",null,[e[4]||(e[4]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th")])],-1)),t("tbody",null,[(s(!0),o(y,null,v(L.value,a=>(s(),o("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.engagementRateByFollower.toFixed(2))+"%",1)]))),128))])])]),t("div",J,[e[7]||(e[7]=t("h2",null,"Top 5 Engagement rate by reach",-1)),t("table",null,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th")])],-1)),t("tbody",null,[(s(!0),o(y,null,v(B.value,a=>(s(),o("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.engagementRateByReach.toFixed(2))+"%",1)]))),128))])])])]),t("div",Q,[t("div",U,[e[8]||(e[8]=t("h2",null,"KOL Type",-1)),b($,{"chart-data":S.value},null,8,["chart-data"])]),t("div",W,[e[9]||(e[9]=t("h2",null,"Total Engagement",-1)),b(k,{"chart-data":N.value},null,8,["chart-data"])])]),t("div",X,[t("div",Y,[e[10]||(e[10]=t("h2",null,"Total Reach, Like, Share, Comment",-1)),b(k,{"chart-data":_.value},null,8,["chart-data"])]),t("div",Z,[e[11]||(e[11]=t("h2",null,"Average CTR (%) by KOL Type",-1)),b(w,{"chart-data":D.value},null,8,["chart-data"])])]),e[14]||(e[14]=t("div",{class:"grid-container"},null,-1)),t("div",tt,[e[13]||(e[13]=t("h2",null,"All KOL Performance Data",-1)),t("table",null,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"KOL Name"),t("th",null,"Followers"),t("th",null,"Platform"),t("th",null,"Type"),t("th",null,"Reach"),t("th",null,"Likes"),t("th",null,"Comments"),t("th",null,"Shares"),t("th",null,"CTR (%)"),t("th",null,"Total Engagement"),t("th",null,"ER by Follower (%)"),t("th",null,"ER by Reach (%)")])],-1)),t("tbody",null,[(s(!0),o(y,null,v(O.value,a=>(s(),o("tr",{key:a.no},[t("td",null,n(a.no),1),t("td",null,n(a.kolName),1),t("td",null,n(a.follower.toLocaleString()),1),t("td",null,n(a.platform),1),t("td",null,n(a.type),1),t("td",null,n(a.reach.toLocaleString()),1),t("td",null,n(a.like.toLocaleString()),1),t("td",null,n(a.comment.toLocaleString()),1),t("td",null,n(a.share.toLocaleString()),1),t("td",null,n(a.ctr.toFixed(2)),1),t("td",null,n(a.totalEngagement.toLocaleString()),1),t("td",null,n(a.engagementRateByFollower.toFixed(2)),1),t("td",null,n(a.engagementRateByReach.toFixed(2)),1)]))),128))])]),t("div",et,[t("button",{onClick:e[0]||(e[0]=a=>g.value--),disabled:g.value===1},"Prev",8,at),t("span",null,"Page "+n(g.value)+" of "+n(R.value),1),t("button",{onClick:e[1]||(e[1]=a=>g.value++),disabled:g.value===R.value},"Next",8,lt)])])])):f("",!0)]))}});export{st as default};
