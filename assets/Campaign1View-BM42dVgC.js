import{d as T,r as h,c as d,o as D,f as K,a as s,b as t,e as O,g as b,t as n,F as m,h as v,i as p,_ as S,j as x,k as L,l as r}from"./index-CQnMXswF.js";const P={class:"page-container"},V={key:0,class:"loading"},$={key:1,class:"error"},A={key:2},M={class:"grid-container top-rankings-grid"},j={class:"table-container"},z={class:"table-container"},I={class:"table-container"},q={class:"grid-container charts-row"},G={class:"chart-container"},H={class:"chart-container"},J={class:"grid-container charts-row"},Q={class:"chart-container"},U={class:"chart-container"},W={class:"table-container"},X={class:"pagination"},Y=["disabled"],Z=["disabled"],y=10,lt=T({__name:"Campaign1View",setup(w){const g=h(!0),c=h(null),o=h([]),u=e=>parseFloat(e.replace(/,|%/g,""))||0,f=e=>{e[0];const l=e.slice(1);console.log("rows",l),o.value=l.map(a=>({no:parseInt(a[0]),kolName:a[1],follower:u(a[2]),platform:a[3],type:a[4],link:a[5],reach:u(a[6]),like:u(a[7]),comment:u(a[8]),share:u(a[9]),ctr:u(a[10]),totalEngagement:u(a[11]),engagementRateByFollower:u(a[12]),engagementRateByReach:u(a[13])}))},B=d(()=>[...o.value].sort((e,l)=>l.engagementRateByReach-e.engagementRateByReach).slice(0,5)),F=d(()=>[...o.value].sort((e,l)=>l.reach-e.reach).slice(0,5)),E=d(()=>[...o.value].sort((e,l)=>l.ctr-e.ctr).slice(0,5)),N=d(()=>({labels:o.value.map(e=>e.kolName),datasets:[{label:"Total Engagement",data:o.value.map(e=>e.totalEngagement),backgroundColor:"#36A2EB"},{label:"Reach",data:o.value.map(e=>e.reach),backgroundColor:"#4BC0C0"}]})),_=d(()=>({labels:o.value.map(e=>e.kolName),datasets:[{label:"Total Engagement",data:o.value.map(e=>e.totalEngagement),backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FDB45C","#949FB1"]}]})),R=d(()=>({labels:o.value.map(e=>e.kolName),datasets:[{label:"Engagement Rate by Reach (%)",data:o.value.map(e=>e.engagementRateByReach),borderColor:"#42b983",tension:.1}]})),i=h(1),C=d(()=>Math.ceil(o.value.length/y)),k=d(()=>{const e=(i.value-1)*y;return o.value.slice(e,e+y)});return D(async()=>{try{g.value=!0;const e=await K("Campaign 1");console.log("data",e),e&&e.length>1?f(e):c.value="No data found."}catch(e){console.log("Failed to load data.",e),c.value="Failed to load data."}finally{g.value=!1}}),(e,l)=>(r(),s("div",P,[l[15]||(l[15]=t("h1",null,"Campaign 1 Details",-1)),l[16]||(l[16]=O()),g.value?(r(),s("div",V,"Loading Data...")):b("",!0),c.value?(r(),s("div",$,n(c.value),1)):b("",!0),!g.value&&!c.value?(r(),s("div",A,[t("div",M,[t("div",j,[l[3]||(l[3]=t("h2",null,"🏆 Top 5 KOLs by Engagement Rate",-1)),t("table",null,[l[2]||(l[2]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th",null,"Rate by Reach")])],-1)),t("tbody",null,[(r(!0),s(m,null,v(B.value,a=>(r(),s("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.engagementRateByReach.toFixed(2))+"%",1)]))),128))])])]),t("div",z,[l[5]||(l[5]=t("h2",null,"🚀 Top 5 KOLs by Reach",-1)),t("table",null,[l[4]||(l[4]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th",null,"Reach")])],-1)),t("tbody",null,[(r(!0),s(m,null,v(F.value,a=>(r(),s("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.reach.toLocaleString()),1)]))),128))])])]),t("div",I,[l[7]||(l[7]=t("h2",null,"🎯 Top 5 KOLs by CTR",-1)),t("table",null,[l[6]||(l[6]=t("thead",null,[t("tr",null,[t("th",null,"KOL"),t("th",null,"CTR")])],-1)),t("tbody",null,[(r(!0),s(m,null,v(E.value,a=>(r(),s("tr",{key:a.no},[t("td",null,n(a.kolName),1),t("td",null,n(a.ctr.toFixed(2))+"%",1)]))),128))])])])]),t("div",q,[t("div",G,[l[8]||(l[8]=t("h2",null,"KOLs Metrics (Bar)",-1)),p(S,{"chart-data":N.value},null,8,["chart-data"])]),t("div",H,[l[9]||(l[9]=t("h2",null,"Engagement Proportion (Pie)",-1)),p(x,{"chart-data":_.value},null,8,["chart-data"])])]),t("div",J,[t("div",Q,[l[10]||(l[10]=t("h2",null,"Engagement Rate by Reach Trend (Line)",-1)),p(L,{"chart-data":R.value},null,8,["chart-data"])]),t("div",U,[l[11]||(l[11]=t("h2",null,"Average CTR (%) by Campaign",-1)),p(L,{"chart-data":R.value},null,8,["chart-data"])])]),l[14]||(l[14]=t("div",{class:"grid-container"},null,-1)),t("div",W,[l[13]||(l[13]=t("h2",null,"📊 All KOL Performance Data",-1)),t("table",null,[l[12]||(l[12]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"KOL Name"),t("th",null,"Followers"),t("th",null,"Platform"),t("th",null,"Type"),t("th",null,"Reach"),t("th",null,"Likes"),t("th",null,"Comments"),t("th",null,"Shares"),t("th",null,"CTR (%)"),t("th",null,"Total Engagement"),t("th",null,"ER by Follower (%)"),t("th",null,"ER by Reach (%)")])],-1)),t("tbody",null,[(r(!0),s(m,null,v(k.value,a=>(r(),s("tr",{key:a.no},[t("td",null,n(a.no),1),t("td",null,n(a.kolName),1),t("td",null,n(a.follower.toLocaleString()),1),t("td",null,n(a.platform),1),t("td",null,n(a.type),1),t("td",null,n(a.reach.toLocaleString()),1),t("td",null,n(a.like.toLocaleString()),1),t("td",null,n(a.comment.toLocaleString()),1),t("td",null,n(a.share.toLocaleString()),1),t("td",null,n(a.ctr.toFixed(2)),1),t("td",null,n(a.totalEngagement.toLocaleString()),1),t("td",null,n(a.engagementRateByFollower.toFixed(2)),1),t("td",null,n(a.engagementRateByReach.toFixed(2)),1)]))),128))])]),t("div",X,[t("button",{onClick:l[0]||(l[0]=a=>i.value--),disabled:i.value===1},"Prev",8,Y),t("span",null,"Page "+n(i.value)+" of "+n(C.value),1),t("button",{onClick:l[1]||(l[1]=a=>i.value++),disabled:i.value===C.value},"Next",8,Z)])])])):b("",!0)]))}});export{lt as default};
